(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;b=a.WebSharper=a.WebSharper||{};c=b.AspNetCore=b.AspNetCore||{};d=c.Tests=c.Tests||{};e=d.WebSocketClient=d.WebSocketClient||{};f=d.Website=d.Website||{};g=f.SomeRecord=f.SomeRecord||{};h=f.Client=f.Client||{};i=a.ClientServer_JsonDecoder=a.ClientServer_JsonDecoder||{};j=a.ClientServer_JsonEncoder=a.ClientServer_JsonEncoder||{};k=a.ClientServer_Templates=a.ClientServer_Templates||{};l=b&&b.UI;m=l&&l.Doc;n=l&&l.AttrProxy;o=b&&b.Arrays;p=b&&b.Concurrency;q=b&&b.Unchecked;r=a.console;s=b&&b.JavaScript;t=s&&s.Promise;u=b&&b.Utils;v=c&&c.WebSocket;w=v&&v.Client;x=w&&w.WithEncoding;y=a.JSON;z=l&&l.Var$1;A=l&&l.Templating;B=A&&A.Runtime;C=B&&B.Server;D=C&&C.ProviderBuilder;E=C&&C.Handler;F=C&&C.TemplateInstance;G=b&&b.ClientSideJson;H=G&&G.Provider;I=l&&l.Client;J=I&&I.Templates;e.WebSocketTest$220$26=a.id;e.WebSocketTest$211$26=a.id;e.WebSocketTest$202$26=a.id;e.WebSocketTest$193$26=a.id;e.WebSocketTest$184$30=a.id;e.WebSocketTest$64$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest$44$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest=function(K){var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;function _4(ba){L.$0.Post({$:0,$0:ba});}function _5(ba,bb){var bc,bd,be,bf,bg,bh;bc=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _4(bb);};})],[m.TextNode("Retweet!")]);bd=self.document.createElement("div");be=self.document.createElement("div");bf=self.document.createElement("div").appendChild(bc.elt);be.innerHTML=(bg=[ba,bb],"<div style=\"display:flex;justify-content:center\"><div>"+(o.get(bg,0)==null?"":a.String(o.get(bg,0)))+("</div><div style=\"margin-left:10px\">"+(o.get(bg,1)==null?"":a.String(o.get(bg,1))))+"</div><div>");bh=bd.appendChild(be);bh.appendChild(bf);Q.elt.appendChild(bh);}function _6(ba,bb){var bc,bd,be,bf,bg,bh;bc=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _4(bb);};})],[m.TextNode("Retweet!")]);bd=self.document.createElement("div");be=self.document.createElement("div");bf=self.document.createElement("div").appendChild(bc.elt);be.innerHTML=(bg=[S,ba,bb],"<div style=\"display:flex;justify-content:center\"><div>Query for "+(o.get(bg,0)==null?"":a.String(o.get(bg,0)))+(": "+(o.get(bg,1)==null?"":a.String(o.get(bg,1))))+("</div><div style=\"margin-left:10px\">"+(o.get(bg,2)==null?"":a.String(o.get(bg,2))))+"</div><div>");bh=bd.appendChild(be);bh.appendChild(bf);R.elt.appendChild(bh);}function _7(ba,bb){var bc;return p.Start((bc=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(function(bd){return bd("Trying to connect.");}(function(bd){r.log(bd);}),t.OfAsync(T).then(function(bd){L={$:1,$0:bd};}),p.Zero()):p.Zero(),p.Delay(function(){(function(bd){return bd("Registering");}(function(bd){r.log(bd);}));L.$0.Post({$:1,$0:X.Get()});return p.Zero();}));})),null);}function _8(ba,bb){var bc;return p.Start((bc=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bd){L={$:1,$0:bd};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bd){return function(be){return bd("Tweeting "+u.toSafe(be));};}(function(bd){r.log(bd);}))(W.Get()));L.$0.Post({$:0,$0:W.Get()});W.Set("");return p.Zero();}));})),null);}function _9(ba,bb){var bc;return p.Start((bc=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bd){L={$:1,$0:bd};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bd){return function(be){return bd("Subscribing to "+u.toSafe(be));};}(function(bd){r.log(bd);}))(Y.Get()));L.$0.Post({$:2,$0:Y.Get()});Y.Set("");return p.Zero();}));})),null);}function _(ba,bb){var bc;return p.Start((bc=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bd){L={$:1,$0:bd};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bd){return function(be){return bd("Unsubscribing to "+u.toSafe(be));};}(function(bd){r.log(bd);}))(V.Get()));L.$0.Post({$:3,$0:V.Get()});V.Set("");return p.Zero();}));})),null);}function $(ba,bb){var bc;return p.Start((bc=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bd){L={$:1,$0:bd};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bd){return function(be){return bd("Querying #"+u.toSafe(be));};}(function(bd){r.log(bd);}))(Z.Get()));L.$0.Post({$:4,$0:Z.Get()});S=Z.Get();Z.Set("");return p.Zero();}));})),null);}L=null;M=m.Element("pre",[],[]);N=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Twitter Feed")])]);O=m.Element("pre",[],[]);P=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Queried Requests")])]);Q=m.Element("div",[],[]);R=m.Element("div",[],[]);S="";T=(U=null,p.Delay(function(){(function(ba){return ba("In here!");}(function(ba){r.log(ba);}));return x.ConnectStateful(function(ba){return y.stringify((j.j())(ba));},function(ba){return(i.j())(y.parse(ba));},K,function(){var ba;ba=null;return p.Delay(function(){return p.Return([0,function(bb){return function(bc){var bd;bd=null;return p.Delay(function(){var be,bf,bg,bh,bi,bj;(function(bk){return bk("In in here here!");}(function(bk){r.log(bk);}));return p.Combine(bc.$==0?(be=bc.$0,be.$==1?(bf=be.$0.split(","),((function(bk){return function(bl){return bk("ResponseMSG "+u.printArray(u.prettyPrint,bl));};}(function(bk){r.log(bk);}))(bf),bg=o.get(o.get(bf,0).split("\""),3),_5(o.get(o.get(bf,1).split("\""),3),bg),p.Zero())):be.$==5?(bh=be.$0,(bi=bh.split(","),((function(bk){return function(bl){return bk("ResponseMSG "+u.prettyPrint(bl));};}(function(bk){r.log(bk);}))(bh),bj=o.get(o.get(bi,0).split("\""),3),_6(o.get(o.get(bi,1).split("\""),3),bj),p.Zero()))):be.$==3?((function(bk){return function(bl){return bk("Success! "+u.toSafe(bl));};}(function(bk){r.log(bk);}))(be.$0),p.Zero()):be.$==4?((function(bk){return function(bl){return bk("Failure! "+u.toSafe(bl));};}(function(bk){r.log(bk);}))(be.$0),p.Zero()):(function(bk){return bk("A message was sent back");}(function(bk){r.log(bk);}),p.Zero())):(function(bk){return bk("FUCK");}(function(bk){r.log(bk);}),p.Zero()),p.Delay(function(){return p.Return(bb+1);}));});};}]);});});}));t.OfAsync(T).then(function(ba){L={$:1,$0:ba};});V=z.Create$1("");W=z.Create$1("");X=z.Create$1("");Y=z.Create$1("");Z=z.Create$1("");_0=m.Element("div",[],[m.Input([n.Create("class","form-control")],X),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(ba){return function(bb){return _7(ba,bb);};})],[m.TextNode("Register")])]);_1=m.Element("div",[],[m.Input([n.Create("class","form-control")],W),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(ba){return function(bb){return _8(ba,bb);};})],[m.TextNode("Tweet")])]);_2=m.Element("div",[],[m.Input([n.Create("class","form-control")],Y),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(ba){return function(bb){return _9(ba,bb);};})],[m.TextNode("Subscribe")])]);_3=m.Element("div",[],[m.Input([n.Create("class","form-control")],V),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(ba){return function(bb){return _(ba,bb);};})],[m.TextNode("Unsubscribe")])]);return m.Element("div",[],[_0,m.Element("div",[],[m.Input([n.Create("class","form-control")],Z),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(ba){return function(bb){return $(ba,bb);};})],[m.TextNode("Query Hashtags")])]),_2,_3,_1,N,M,Q,P,O,R]);};g.New=function(K){return{Name:K};};h.Main=function(K,L){var M,N,O,P,Q,R;return(M=(N=(O=e.WebSocketTest(L),(P=new D.New$1(),(P.h.push({$:0,$0:"websockettest",$1:O}),P))),(N.h.push({$:1,$0:"aboutpagelink",$1:K}),N)),(Q=E.CompleteHoles(M.k,M.h,[]),(R=new F.New(Q[1],k.body(Q[0])),M.i=R,R))).get_Doc();};i.j=function(){return i._v?i._v:i._v=(H.DecodeUnion(void 0,"$",[[0,[["$0","con",H.Id(),0]]],[1,[["$0","tweet",H.Id(),0]]],[2,[["$0","register",H.Id(),0]]],[3,[["$0","succ",H.Id(),0]]],[4,[["$0","fail",H.Id(),0]]],[5,[["$0","tweet",H.Id(),0]]]]))();};j.j=function(){return j._v?j._v:j._v=(H.EncodeUnion(void 0,"$",[[0,[["$0","tweet",H.Id(),0]]],[1,[["$0","account",H.Id(),0]]],[2,[["$0","userToSubTo",H.Id(),0]]],[3,[["$0","userToUnsubTo",H.Id(),0]]],[4,[["$0","query",H.Id(),0]]],[5,[["$0","login",H.Id(),0]]],[6,[["$0","logout",H.Id(),0]]]]))();};k.body=function(K){J.LoadLocalTemplates("main");return K?J.NamedTemplate("main",{$:1,$0:"body"},K):void 0;};}(self));
