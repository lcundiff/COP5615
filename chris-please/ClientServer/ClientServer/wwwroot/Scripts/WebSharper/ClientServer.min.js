(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;b=a.WebSharper=a.WebSharper||{};c=b.AspNetCore=b.AspNetCore||{};d=c.Tests=c.Tests||{};e=d.WebSocketClient=d.WebSocketClient||{};f=d.Website=d.Website||{};g=f.SomeRecord=f.SomeRecord||{};h=f.Client=f.Client||{};i=a.ClientServer_JsonDecoder=a.ClientServer_JsonDecoder||{};j=a.ClientServer_JsonEncoder=a.ClientServer_JsonEncoder||{};k=a.ClientServer_Templates=a.ClientServer_Templates||{};l=b&&b.UI;m=l&&l.Doc;n=l&&l.AttrProxy;o=b&&b.Arrays;p=b&&b.Concurrency;q=b&&b.Unchecked;r=a.console;s=b&&b.JavaScript;t=s&&s.Promise;u=b&&b.Utils;v=c&&c.WebSocket;w=v&&v.Client;x=w&&w.WithEncoding;y=a.JSON;z=l&&l.Var$1;A=l&&l.Templating;B=A&&A.Runtime;C=B&&B.Server;D=C&&C.ProviderBuilder;E=C&&C.Handler;F=C&&C.TemplateInstance;G=b&&b.ClientSideJson;H=G&&G.Provider;I=l&&l.Client;J=I&&I.Templates;e.WebSocketTest$277$25=a.id;e.WebSocketTest$274$26=a.id;e.WebSocketTest$266$26=a.id;e.WebSocketTest$257$26=a.id;e.WebSocketTest$248$26=a.id;e.WebSocketTest$239$26=a.id;e.WebSocketTest$230$30=a.id;e.WebSocketTest$84$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest$64$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest$44$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest=function(K){var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4;function _5(be){L.$0.Post({$:0,$0:be});}function _6(be,bf){var bg,bh,bi,bj,bk,bl;bg=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bf);};})],[m.TextNode("Retweet!")]);bh=self.document.createElement("div");bi=self.document.createElement("div");bj=self.document.createElement("div").appendChild(bg.elt);bi.innerHTML=(bk=[be,bf],"<div style=\"display:flex;justify-content:center\"><div>"+(o.get(bk,0)==null?"":a.String(o.get(bk,0)))+("</div><div style=\"margin-left:10px\">"+(o.get(bk,1)==null?"":a.String(o.get(bk,1))))+"</div><div>");bl=bh.appendChild(bi);bl.appendChild(bj);Q.elt.appendChild(bl);}function _7(be,bf){var bg,bh,bi,bj,bk,bl;bg=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bf);};})],[m.TextNode("Retweet!")]);bh=self.document.createElement("div");bi=self.document.createElement("div");bj=self.document.createElement("div").appendChild(bg.elt);bi.innerHTML=(bk=[S,be,bf],"<div style=\"display:flex;justify-content:center\"><div>Query for "+(o.get(bk,0)==null?"":a.String(o.get(bk,0)))+(": "+(o.get(bk,1)==null?"":a.String(o.get(bk,1))))+("</div><div style=\"margin-left:10px\">"+(o.get(bk,2)==null?"":a.String(o.get(bk,2))))+"</div><div>");bl=bh.appendChild(bi);bl.appendChild(bj);R.elt.appendChild(bl);}function _8(be,bf){var bg,bh,bi,bj,bk,bl;bg=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bf);};})],[m.TextNode("Retweet!")]);bh=self.document.createElement("div");bi=self.document.createElement("div");bj=self.document.createElement("div").appendChild(bg.elt);bi.innerHTML=(bk=[be,bf],"<div style=\"display:flex;justify-content:center\"><div>While you were away you missed: "+(o.get(bk,0)==null?"":a.String(o.get(bk,0)))+("</div><div style=\"margin-left:10px\">"+(o.get(bk,1)==null?"":a.String(o.get(bk,1))))+"</div><div>");bl=bh.appendChild(bi);bl.appendChild(bj);Q.elt.appendChild(bl);}function _9(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(function(bh){return bh("Trying to connect.");}(function(bh){r.log(bh);}),t.OfAsync(T).then(function(bh){L={$:1,$0:bh};}),p.Zero()):p.Zero(),p.Delay(function(){var bh;(function(bi){return bi("Registering");}(function(bi){r.log(bi);}));L.$0.Post({$:1,$0:X.Get()});bh=self.document.getElementById("register");bh.innerHTML="Account Registered";bh.setAttribute("disabled","true");X.Set("Welcome to Twitter, @"+X.Get());self.document.getElementById("register-form").setAttribute("disabled","true");return p.Zero();}));})),null);}function _(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bh){L={$:1,$0:bh};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bh){return function(bi){return bh("Tweeting "+u.toSafe(bi));};}(function(bh){r.log(bh);}))(W.Get()));L.$0.Post({$:0,$0:W.Get()});W.Set("");return p.Zero();}));})),null);}function $(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bh){L={$:1,$0:bh};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bh){return function(bi){return bh("Subscribing to "+u.toSafe(bi));};}(function(bh){r.log(bh);}))(Y.Get()));L.$0.Post({$:2,$0:Y.Get()});Y.Set("");return p.Zero();}));})),null);}function ba(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bh){L={$:1,$0:bh};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bh){return function(bi){return bh("Unsubscribing to "+u.toSafe(bi));};}(function(bh){r.log(bh);}))(V.Get()));L.$0.Post({$:3,$0:V.Get()});V.Set("");return p.Zero();}));})),null);}function bb(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(T).then(function(bh){L={$:1,$0:bh};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bh){return function(bi){return bh("Querying #"+u.toSafe(bi));};}(function(bh){r.log(bh);}))(Z.Get()));L.$0.Post({$:4,$0:Z.Get()});S=Z.Get();Z.Set("");return p.Zero();}));})),null);}function bc(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){L.$0.Post({$:5});return p.Zero();})),null);}function bd(be,bf){var bg;return p.Start((bg=null,p.Delay(function(){L.$0.Post({$:6});return p.Zero();})),null);}L=null;M=m.Element("pre",[],[]);N=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Twitter Feed")])]);O=m.Element("pre",[],[]);P=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Queried Requests")])]);Q=m.Element("div",[],[]);R=m.Element("div",[],[]);S="";T=(U=null,p.Delay(function(){(function(be){return be("In here!");}(function(be){r.log(be);}));return x.ConnectStateful(function(be){return y.stringify((j.j())(be));},function(be){return(i.j())(y.parse(be));},K,function(){var be;be=null;return p.Delay(function(){return p.Return([0,function(bf){return function(bg){var bh;bh=null;return p.Delay(function(){var bi,bj,bk,bl,bm,bn,bo,bp;(function(bq){return bq("In in here here!");}(function(bq){r.log(bq);}));return p.Combine(bg.$==0?(bi=bg.$0,bi.$==1?(bj=bi.$0.split(","),((function(bq){return function(br){return bq("ResponseMSG "+u.printArray(u.prettyPrint,br));};}(function(bq){r.log(bq);}))(bj),bk=o.get(o.get(bj,0).split("\""),3),_6(o.get(o.get(bj,1).split("\""),3),bk),p.Zero())):bi.$==6?(bl=bi.$0.split(","),((function(bq){return function(br){return bq("ResponseMSG "+u.printArray(u.prettyPrint,br));};}(function(bq){r.log(bq);}))(bl),bm=o.get(o.get(bl,0).split("\""),3),_8(o.get(o.get(bl,1).split("\""),3),bm),p.Zero())):bi.$==5?(bn=bi.$0,(bo=bn.split(","),((function(bq){return function(br){return bq("ResponseMSG "+u.prettyPrint(br));};}(function(bq){r.log(bq);}))(bn),bp=o.get(o.get(bo,0).split("\""),3),_7(o.get(o.get(bo,1).split("\""),3),bp),p.Zero()))):bi.$==3?((function(bq){return function(br){return bq("Success! "+u.toSafe(br));};}(function(bq){r.log(bq);}))(bi.$0),p.Zero()):bi.$==4?((function(bq){return function(br){return bq("Failure! "+u.toSafe(br));};}(function(bq){r.log(bq);}))(bi.$0),p.Zero()):(function(bq){return bq("A message was sent back");}(function(bq){r.log(bq);}),p.Zero())):(function(bq){return bq("Failure");}(function(bq){r.log(bq);}),p.Zero()),p.Delay(function(){return p.Return(bf+1);}));});};}]);});});}));t.OfAsync(T).then(function(be){L={$:1,$0:be};});V=z.Create$1("");W=z.Create$1("");X=z.Create$1("");Y=z.Create$1("");Z=z.Create$1("");_0=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","register-form")],X),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","register"),n.HandlerImpl("click",function(be){return function(bf){return _9(be,bf);};})],[m.TextNode("Register")])]);_1=m.Element("div",[],[m.Input([n.Create("class","form-control")],W),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return _(be,bf);};})],[m.TextNode("Tweet")])]);_2=m.Element("div",[],[m.Input([n.Create("class","form-control")],Y),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return $(be,bf);};})],[m.TextNode("Subscribe")])]);_3=m.Element("div",[],[m.Input([n.Create("class","form-control")],V),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return ba(be,bf);};})],[m.TextNode("Unsubscribe")])]);_4=m.Element("div",[],[m.Input([n.Create("class","form-control")],Z),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return bb(be,bf);};})],[m.TextNode("Query")])]);return m.Element("div",[],[_0,m.Element("div",[],[m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return bc(be,bf);};})],[m.TextNode("Login")]),m.Element("button",[n.Create("class","btn btn-primary"),n.HandlerImpl("click",function(be){return function(bf){return bd(be,bf);};})],[m.TextNode("Logout")])]),_4,_2,_3,_1,N,M,Q,P,O,R]);};g.New=function(K){return{Name:K};};h.Main=function(K,L){var M,N,O,P,Q,R;return(M=(N=(O=e.WebSocketTest(L),(P=new D.New$1(),(P.h.push({$:0,$0:"websockettest",$1:O}),P))),(N.h.push({$:1,$0:"aboutpagelink",$1:K}),N)),(Q=E.CompleteHoles(M.k,M.h,[]),(R=new F.New(Q[1],k.body(Q[0])),M.i=R,R))).get_Doc();};i.j=function(){return i._v?i._v:i._v=(H.DecodeUnion(void 0,"$",[[0,[["$0","con",H.Id(),0]]],[1,[["$0","tweet",H.Id(),0]]],[2,[["$0","register",H.Id(),0]]],[3,[["$0","succ",H.Id(),0]]],[4,[["$0","fail",H.Id(),0]]],[5,[["$0","tweet",H.Id(),0]]],[6,[["$0","tweet",H.Id(),0]]]]))();};j.j=function(){return j._v?j._v:j._v=(H.EncodeUnion(void 0,"$",[[0,[["$0","tweet",H.Id(),0]]],[1,[["$0","account",H.Id(),0]]],[2,[["$0","userToSubTo",H.Id(),0]]],[3,[["$0","userToUnsubTo",H.Id(),0]]],[4,[["$0","query",H.Id(),0]]],[5,[]],[6,[]]]))();};k.body=function(K){J.LoadLocalTemplates("main");return K?J.NamedTemplate("main",{$:1,$0:"body"},K):void 0;};}(self));
