(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;b=a.WebSharper=a.WebSharper||{};c=b.AspNetCore=b.AspNetCore||{};d=c.Tests=c.Tests||{};e=d.WebSocketClient=d.WebSocketClient||{};f=d.Website=d.Website||{};g=f.SomeRecord=f.SomeRecord||{};h=f.Client=f.Client||{};i=a.ClientServer_JsonDecoder=a.ClientServer_JsonDecoder||{};j=a.ClientServer_JsonEncoder=a.ClientServer_JsonEncoder||{};k=a.ClientServer_Templates=a.ClientServer_Templates||{};l=b&&b.UI;m=l&&l.Doc;n=l&&l.AttrProxy;o=b&&b.Arrays;p=b&&b.Concurrency;q=b&&b.Unchecked;r=a.console;s=b&&b.JavaScript;t=s&&s.Promise;u=b&&b.Utils;v=l&&l.Var$1;w=c&&c.WebSocket;x=w&&w.Client;y=x&&x.WithEncoding;z=a.JSON;A=l&&l.Templating;B=A&&A.Runtime;C=B&&B.Server;D=C&&C.ProviderBuilder;E=C&&C.Handler;F=C&&C.TemplateInstance;G=b&&b.ClientSideJson;H=G&&G.Provider;I=l&&l.Client;J=I&&I.Templates;e.WebSocketTest$373$25=a.id;e.WebSocketTest$368$26=a.id;e.WebSocketTest$358$26=a.id;e.WebSocketTest$344$26=a.id;e.WebSocketTest$331$26=a.id;e.WebSocketTest$316$26=a.id;e.WebSocketTest$302$30=a.id;e.WebSocketTest$84$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest$64$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest$44$22=function(K,L){return function(){return function(){return K(L);};};};e.WebSocketTest=function(K){var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4;function _5(bf){L.$0.Post({$:0,$0:bf});}function _6(bf,bg){var bh,bi,bj,bk,bl,bm;bh=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bg);};})],[m.TextNode("Retweet!")]);bi=self.document.createElement("div");bj=self.document.createElement("div");bk=self.document.createElement("div").appendChild(bh.elt);bj.innerHTML=(bl=[bf,bg],"<div style=\"display:flex;justify-content:center\"><div>"+(o.get(bl,0)==null?"":a.String(o.get(bl,0)))+("</div><div style=\"margin-left:10px\">"+(o.get(bl,1)==null?"":a.String(o.get(bl,1))))+"</div><div>");bm=bi.appendChild(bj);bm.appendChild(bk);Q.elt.appendChild(bm);}function _7(bf,bg){var bh,bi,bj,bk,bl,bm;bh=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bg);};})],[m.TextNode("Retweet!")]);bi=self.document.createElement("div");bj=self.document.createElement("div");bk=self.document.createElement("div").appendChild(bh.elt);bj.innerHTML=(bl=[S,bf,bg],"<div style=\"display:flex;justify-content:center\"><div>Query for "+(o.get(bl,0)==null?"":a.String(o.get(bl,0)))+(": "+(o.get(bl,1)==null?"":a.String(o.get(bl,1))))+("</div><div style=\"margin-left:10px\">"+(o.get(bl,2)==null?"":a.String(o.get(bl,2))))+"</div><div>");bm=bi.appendChild(bj);bm.appendChild(bk);R.elt.appendChild(bm);}function _8(bf,bg){var bh,bi,bj,bk,bl,bm;bh=m.Element("button",[n.Create("class","retweet-handler btn btn-info"),n.HandlerImpl("click",function(){return function(){return _5(bg);};})],[m.TextNode("Retweet!")]);bi=self.document.createElement("div");bj=self.document.createElement("div");bk=self.document.createElement("div").appendChild(bh.elt);bj.innerHTML=(bl=[bf,bg],"<div style=\"display:flex;justify-content:center\"><div>While you were away you missed: "+(o.get(bl,0)==null?"":a.String(o.get(bl,0)))+("</div><div style=\"margin-left:10px\">"+(o.get(bl,1)==null?"":a.String(o.get(bl,1))))+"</div><div>");bm=bi.appendChild(bj);bm.appendChild(bk);Q.elt.appendChild(bm);}function _9(){var bf,bg,bh,bi,bj,bk,bl,bm,bn;bf=self.document.getElementById("register");bf.innerHTML="Account Registered";bf.setAttribute("disabled","true");T.Set("Welcome to Twitter, @"+T.Get());self.document.getElementById("register-form").setAttribute("disabled","true");self.document.getElementById("logout").removeAttribute("disabled");bg=self.document.getElementById("tweetbox");bh=self.document.getElementById("subscribebox");bi=self.document.getElementById("unsubscribebox");bj=self.document.getElementById("querybox");bk=self.document.getElementById("tweetbtn");bl=self.document.getElementById("subscribebtn");bm=self.document.getElementById("unsubscribebtn");bn=self.document.getElementById("querybtn");bg.removeAttribute("disabled");bh.removeAttribute("disabled");bi.removeAttribute("disabled");bj.removeAttribute("disabled");bk.removeAttribute("disabled");bl.removeAttribute("disabled");bm.removeAttribute("disabled");bn.removeAttribute("disabled");}function _(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(function(bi){return bi("Trying to connect.");}(function(bi){r.log(bi);}),t.OfAsync(U).then(function(bi){L={$:1,$0:bi};}),p.Zero()):p.Zero(),p.Delay(function(){(function(bi){return bi("Registering");}(function(bi){r.log(bi);}));L.$0.Post({$:1,$0:T.Get()});return p.Zero();}));})),null);}function $(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(U).then(function(bi){L={$:1,$0:bi};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bi){return function(bj){return bi("Tweeting "+u.toSafe(bj));};}(function(bi){r.log(bi);}))(X.Get()));L.$0.Post({$:0,$0:X.Get()});X.Set("");return p.Zero();}));})),null);}function ba(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(U).then(function(bi){L={$:1,$0:bi};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bi){return function(bj){return bi("Subscribing to "+u.toSafe(bj));};}(function(bi){r.log(bi);}))(Y.Get()));L.$0.Post({$:2,$0:Y.Get()});Y.Set("");return p.Zero();}));})),null);}function bb(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(U).then(function(bi){L={$:1,$0:bi};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bi){return function(bj){return bi("Unsubscribing to "+u.toSafe(bj));};}(function(bi){r.log(bi);}))(W.Get()));L.$0.Post({$:3,$0:W.Get()});W.Set("");return p.Zero();}));})),null);}function bc(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){return p.Combine(q.Equals(L,null)?(t.OfAsync(U).then(function(bi){L={$:1,$0:bi};}),p.Zero()):p.Zero(),p.Delay(function(){((function(bi){return function(bj){return bi("Querying #"+u.toSafe(bj));};}(function(bi){r.log(bi);}))(Z.Get()));L.$0.Post({$:4,$0:Z.Get()});S=Z.Get();Z.Set("");return p.Zero();}));})),null);}function bd(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){var bi,bj,bk,bl,bm,bn,bo,bp,bq,br;L.$0.Post({$:5});bi=self.document.getElementById("login");bj=self.document.getElementById("logout");bk=self.document.getElementById("tweetbox");bl=self.document.getElementById("subscribebox");bm=self.document.getElementById("unsubscribebox");bn=self.document.getElementById("querybox");bo=self.document.getElementById("tweetbtn");bp=self.document.getElementById("subscribebtn");bq=self.document.getElementById("unsubscribebtn");br=self.document.getElementById("querybtn");bk.removeAttribute("disabled");bl.removeAttribute("disabled");bm.removeAttribute("disabled");bn.removeAttribute("disabled");bo.removeAttribute("disabled");bp.removeAttribute("disabled");bq.removeAttribute("disabled");br.removeAttribute("disabled");bi.removeAttribute("disabled");bj.removeAttribute("disabled");bi.setAttribute("disabled","true");return p.Zero();})),null);}function be(bf,bg){var bh;return p.Start((bh=null,p.Delay(function(){var bi,bj,bk,bl,bm,bn,bo,bp,bq,br;L.$0.Post({$:6});bi=self.document.getElementById("login");bj=self.document.getElementById("logout");bk=self.document.getElementById("tweetbox");bl=self.document.getElementById("subscribebox");bm=self.document.getElementById("unsubscribebox");bn=self.document.getElementById("querybox");bo=self.document.getElementById("tweetbtn");bp=self.document.getElementById("subscribebtn");bq=self.document.getElementById("unsubscribebtn");br=self.document.getElementById("querybtn");bk.setAttribute("disabled","true");bl.setAttribute("disabled","true");bm.setAttribute("disabled","true");bn.setAttribute("disabled","true");bo.setAttribute("disabled","true");bp.setAttribute("disabled","true");bq.setAttribute("disabled","true");br.setAttribute("disabled","true");bi.removeAttribute("disabled");bj.removeAttribute("disabled");bj.setAttribute("disabled","true");return p.Zero();})),null);}L=null;M=m.Element("pre",[],[]);N=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Twitter Feed")])]);O=m.Element("pre",[],[]);P=m.Element("div",[],[m.Element("h3",[],[m.TextNode("Your Queried Requests")])]);Q=m.Element("div",[],[]);R=m.Element("div",[],[]);S="";T=v.Create$1("");U=(V=null,p.Delay(function(){(function(bf){return bf("In here!");}(function(bf){r.log(bf);}));return y.ConnectStateful(function(bf){return z.stringify((j.j())(bf));},function(bf){return(i.j())(z.parse(bf));},K,function(){var bf;bf=null;return p.Delay(function(){return p.Return([0,function(bg){return function(bh){var bi;bi=null;return p.Delay(function(){var bj,bk,bl,bm,bn,bo,bp,bq,br;(function(bs){return bs("In in here here!");}(function(bs){r.log(bs);}));return p.Combine(bh.$==0?(bj=bh.$0,bj.$==1?(bk=bj.$0.split(","),((function(bs){return function(bt){return bs("ResponseMSG "+u.printArray(u.prettyPrint,bt));};}(function(bs){r.log(bs);}))(bk),bl=o.get(o.get(bk,0).split("\""),3),_6(o.get(o.get(bk,1).split("\""),3),bl),p.Zero())):bj.$==6?(bm=bj.$0.split(","),((function(bs){return function(bt){return bs("ResponseMSG "+u.printArray(u.prettyPrint,bt));};}(function(bs){r.log(bs);}))(bm),bn=o.get(o.get(bm,0).split("\""),3),_8(o.get(o.get(bm,1).split("\""),3),bn),p.Zero())):bj.$==5?(bo=bj.$0,(bp=bo.split(","),((function(bs){return function(bt){return bs("ResponseMSG "+u.prettyPrint(bt));};}(function(bs){r.log(bs);}))(bo),bq=o.get(o.get(bp,0).split("\""),3),_7(o.get(o.get(bp,1).split("\""),3),bq),p.Zero()))):bj.$==3?((function(bs){return function(bt){return bs("Success! "+u.toSafe(bt));};}(function(bs){r.log(bs);}))(bj.$0),p.Zero()):bj.$==4?(br=bj.$0,((function(bs){return function(bt){return bs("Failure! "+u.toSafe(bt));};}(function(bs){r.log(bs);}))(br),a.alert(br),p.Zero())):bj.$==2?(_9(),p.Zero()):(function(bs){return bs("A message was sent back");}(function(bs){r.log(bs);}),p.Zero())):(function(bs){return bs("Failure");}(function(bs){r.log(bs);}),p.Zero()),p.Delay(function(){return p.Return(bg+1);}));});};}]);});});}));t.OfAsync(U).then(function(bf){L={$:1,$0:bf};});W=v.Create$1("");X=v.Create$1("");Y=v.Create$1("");Z=v.Create$1("");_0=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","register-form")],T),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","register"),n.HandlerImpl("click",function(bf){return function(bg){return _(bf,bg);};})],[m.TextNode("Register")])]);_1=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","tweetbox"),n.Create("disabled","true")],X),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","tweetbtn"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return $(bf,bg);};})],[m.TextNode("Tweet")])]);_2=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","subscribebox"),n.Create("disabled","true")],Y),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","subscribebtn"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return ba(bf,bg);};})],[m.TextNode("Subscribe")])]);_3=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","unsubscribebox"),n.Create("disabled","true")],W),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","unsubscribebtn"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return bb(bf,bg);};})],[m.TextNode("Unsubscribe")])]);_4=m.Element("div",[],[m.Input([n.Create("class","form-control"),n.Create("id","querybox"),n.Create("disabled","true")],Z),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","querybtn"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return bc(bf,bg);};})],[m.TextNode("Query")])]);return m.Element("div",[],[_0,m.Element("div",[],[m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","login"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return bd(bf,bg);};})],[m.TextNode("Login")]),m.Element("button",[n.Create("class","btn btn-primary"),n.Create("id","logout"),n.Create("disabled","true"),n.HandlerImpl("click",function(bf){return function(bg){return be(bf,bg);};})],[m.TextNode("Logout")])]),_4,_2,_3,_1,N,M,Q,P,O,R]);};g.New=function(K){return{Name:K};};h.Main=function(K,L){var M,N,O,P,Q,R;return(M=(N=(O=e.WebSocketTest(L),(P=new D.New$1(),(P.h.push({$:0,$0:"websockettest",$1:O}),P))),(N.h.push({$:1,$0:"aboutpagelink",$1:K}),N)),(Q=E.CompleteHoles(M.k,M.h,[]),(R=new F.New(Q[1],k.body(Q[0])),M.i=R,R))).get_Doc();};i.j=function(){return i._v?i._v:i._v=(H.DecodeUnion(void 0,"$",[[0,[["$0","con",H.Id(),0]]],[1,[["$0","tweet",H.Id(),0]]],[2,[]],[3,[["$0","succ",H.Id(),0]]],[4,[["$0","fail",H.Id(),0]]],[5,[["$0","tweet",H.Id(),0]]],[6,[["$0","tweet",H.Id(),0]]]]))();};j.j=function(){return j._v?j._v:j._v=(H.EncodeUnion(void 0,"$",[[0,[["$0","tweet",H.Id(),0]]],[1,[["$0","account",H.Id(),0]]],[2,[["$0","userToSubTo",H.Id(),0]]],[3,[["$0","userToUnsubTo",H.Id(),0]]],[4,[["$0","query",H.Id(),0]]],[5,[]],[6,[]]]))();};k.body=function(K){J.LoadLocalTemplates("main");return K?J.NamedTemplate("main",{$:1,$0:"body"},K):void 0;};}(self));
